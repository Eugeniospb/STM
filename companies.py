"""Реквизиты компаний для генерации документов"""

COMPANIES = {
    "ооо стм": {
        "full_name": "Общество с ограниченной ответственностью «СТМ»",
        "short_name": "ООО «СТМ»",
        "inn": "7813568956",
        "kpp": "781401001",
        "ogrn": "1137847312866",
        "address": "197375, Санкт-Петербург, ул. Маршала Новикова д.42, Литер А, Помещение ПИБ №1-Н-113",
        "bank": "АО «ТИНЬКОФФ БАНК»",
        "bik": "044525974",
        "rs": "40702810810000134609",
        "ks": "30101810145250000974",
        "phone": "+7 812 603 78 71",
        "email": "stm.laser@gmail.com",
        "signer": "Тихонов Е.В.",
        "position": "Генеральный директор",
    },
    "ип тихонов": {
        "full_name": "Индивидуальный предприниматель Тихонов Александр Викторович",
        "short_name": "ИП Тихонов А.В.",
        "inn": "781428127765",
        "ogrnip": "319784700268498",
        "address": "197375, Санкт-Петербург, ул. Репищева д.17, корп.1, кв.28",
        "bank": "АО «ТИНЬКОФФ БАНК»",
        "bik": "044525974",
        "rs": "40802810400001208048",
        "ks": "30101810145250000974",
        "phone": "+7 812 603 78 71",
        "email": "stm.laser@gmail.com",
        "signer": "Тихонов А.В.",
    },
    "ип трифонов": {
        "full_name": "Индивидуальный предприниматель Трифонов Алексей Викторович",
        "short_name": "ИП Трифонов А.В.",
        "inn": "583700333358",
        "ogrnip": "325580000071117",
        "address_legal": "г. Пенза, ул. Галетная, 19-76",
        "address": "197375, Санкт-Петербург, ул. Маршала Новикова д.42, Литер А",
        "bank": "ООО «Банк Точка»",
        "bik": "044525104",
        "rs": "40802810920000855629",
        "ks": "30101810745374525104",
        "signer": "Трифонов А.В.",
    },
}

# Алиасы для поиска
ALIASES = {
    "стм": "ооо стм",
    "ооо": "ооо стм",
    "тихонов": "ип тихонов",
    "тихонова": "ип тихонов",
    "александр": "ип тихонов",
    "ип александр": "ип тихонов",
    "трифонов": "ип трифонов",
    "трифонова": "ип трифонов",
    "алексей": "ип трифонов",
}

def find_company(text: str):
    """Ищет компанию по тексту, возвращает (ключ, данные) или (None, None)"""
    text_lower = text.lower()
    # Сначала точные совпадения
    for key in COMPANIES:
        if key in text_lower:
            return key, COMPANIES[key]
    # Потом алиасы
    for alias, key in ALIASES.items():
        if alias in text_lower:
            return key, COMPANIES[key]
    return None, None
